!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("AniJS requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=function(t){var n="data-anijs",r="default",i="(\\s+|^)",o="(\\s+|$)",a="animationend",v="transitionend";t={rootDOMTravelScope:{},eventProviderCollection:{},init:function(){l._t={};var e=l._a();t.registerHelper(r,e),l._u=r,t.rootDOMTravelScope=document,t.Parser=l.Parser,l._v=l._p(),l._w=""},setDOMRootTravelScope:function(e){var n;try{"document"===e?n=document:(n=document.querySelector(e))||(n=document)}catch(e){n=document}t.rootDOMTravelScope=n},run:function(){var e,r={};t.purgeAll(),t.eventProviderCollection={};for(var i,o=(e=l._o(t.rootDOMTravelScope)).length,a=0;o>a;a++)i=e[a],r=l._n(i.getAttribute(n)),l._c(i,r)},createAnimation:function(e,t){var n=t||"";l._c(n,e)},getHelper:function(e){var t=l._t;return t[e]||t[r]},registerHelper:function(e,t){l._t[e]=t},purge:function(e){if(e&&""!==e&&" "!==e)for(var n=document.querySelectorAll(e),r=n.length,i=0;r>i;i++)t.EventSystem.purgeEventTarget(n[i])},purgeAll:function(){t.EventSystem.purgeAll()},purgeEventTarget:function(e){t.EventSystem.purgeEventTarget(e)},setClassNamesWhenAnim:function(e){l._w=" "+e},createEventProvider:function(){return t.EventSystem.createEventTarget()},registerEventProvider:function(e){var n=t.eventProviderCollection;return e.id&&e.value&&t.EventSystem.isEventTarget(e.value)?(n[e.id]=e.value,1):""},getEventProvider:function(e){return t.eventProviderCollection[e]}};var l={_a:function(){return{removeAnim:function(e,t){t.nodeHelper.removeClass(e.target,t.behavior)},holdAnimClass:function(){}}},_b:function(){return new Parser},_c:function(e,t){for(var n,r=t.length,i=0;r>i;i++)n=t[i],l._d(e,n)},_d:function(e,n){var r=l._e(n),i=l._f(e,n);if(""!==r)for(var o,a=i.length,v=0;a>v;v++)if(o=i[v],t.EventSystem.isEventTarget(o)){var s=function(r){var i=l._g(e,n),o=l._h(n),a=l._j(e,n),v=l._i(e,n);""!==l._w&&(o+=l._w);var s={behaviorTargetList:i,nodeHelper:l.NodeHelper,animationEndEvent:l._v,behavior:o,after:v,eventSystem:t.EventSystem},u=new l.AnimationContext(s);a&&l.Util.isFunction(a)?a(r,u):u.run()};t.EventSystem.addEventListenerHelper(o,r,s,!1),t.EventSystem.registerEventHandle(o,r,s)}},_e:function(e){var t=e.event||"";return t===a?t=l._p():t===v&&(t=l._q()),t},_f:function(n,r){var i,o=[n],a=t.rootDOMTravelScope;if(r.eventTarget)if((i=l._m(r.eventTarget)).length>0)o=i;else if("document"===r.eventTarget)o=[document];else if("window"===r.eventTarget)o=[e];else if(r.eventTarget.split)try{o=a.querySelectorAll(r.eventTarget)}catch(e){o=[]}return o},_g:function(e,n){var r=[e],i=t.rootDOMTravelScope,o=n.behaviorTarget;if(o){o=o.split("$").join(",");try{r=i.querySelectorAll(o)}catch(e){r=[]}}return r},_h:function(e){return e.behavior||""},_i:function(e,t){return l._k(e,t,t.after)},_j:function(e,t){return l._k(e,t,t.before)},_k:function(e,t,n){var r=n||"",i=l._l(t);if(r&&!l.Util.isFunction(r)){var o=l._t[i];r=!(!o||!o[r])&&o[r]}return r},_l:function(e){return e.helper||l._u},_m:function(e){var n=[];if(t.eventProviderCollection,e)if(e.id&&t.EventSystem.isEventTarget(e.value))n.push(e.value),t.registerEventProvider(e);else if(e.split){eventProviderIDList=e.split("$");for(var r,i=eventProviderIDList.length,o=1;i>o;o++)if((r=eventProviderIDList[o])&&" "!==r){r=r.trim();var a=t.getEventProvider(r);a||(a=t.EventSystem.createEventTarget(),t.registerEventProvider({id:r,value:a})),n.push(a)}}return n},_n:function(e){return l.Parser.parse(e)},_o:function(e){return e.querySelectorAll("[data-anijs]")},_p:function(){var e=l._r();return[a,"oAnimationEnd",a,"webkitAnimationEnd"][e]},_q:function(){var e=l._r();return[v,"oTransitionEnd",v,"webkitTransitionEnd"][e]},_r:function(){for(var e=document.createElement("fakeelement"),t=["animation","OAnimation","MozAnimation","webkitAnimation"],n=0;n<t.length;n++)if(void 0!==e.style[t[n]])return n},AnimationContext:function(e){var t=this;t.init=function(e){t.behaviorTargetList=e.behaviorTargetList||[],t.nodeHelper=e.nodeHelper,t.animationEndEvent=e.animationEndEvent,t.behavior=e.behavior,t.after=e.after,t.eventSystem=e.eventSystem},t.run=function(){for(var e,n=t,r=n.behaviorTargetList,i=r.length,o=n.nodeHelper,a=n.behavior,v=n.animationEndEvent,s=n.after,u=0;i>u;u++)e=r[u],o.addClass(e,a),n.eventSystem.addEventListenerHelper(e,v,function(e){n.eventSystem.removeEventListenerHelper(e.target,e.type,arguments.callee),s?l.Util.isFunction(s)&&s(e,t):o.removeClass(e.target,a)})},t.init(e)},Parser:{parse:function(e){return this.parseDeclaration(e)},parseDeclaration:function(e){for(var t,n,r=[],i=(t=e.split(";")).length,o=0;i>o;o++)n=this.parseSentence(t[o]),r.push(n);return r},parseSentence:function(e){for(var t,n,r={},i=(t=e.split(",")).length,o=0;i>o;o++)r[(n=this.parseDefinition(t[o])).key]=n.value;return r},parseDefinition:function(e){var t,n,r,i={};return(t=e.split(":")).length>1&&(n=t[0].trim(),r=t[1].trim(),"if"===n?n="event":"on"===n?n="eventTarget":"do"===n?n="behavior":"to"===n&&(n="behaviorTarget"),i.key=n,i.value=r),i}}};return l.NodeHelper={addClass:function(e,t){t instanceof Array||(t=t.split(" "));for(var n=0,r=t.length;r>n;++n)t[n]&&!new RegExp(i+t[n]+o).test(e.className)&&(e.className=e.className.trim()+" "+t[n])},removeClass:function(e,t){t instanceof Array||(t=t.split(" "));for(var n=0,r=t.length;r>n;++n)e.className=e.className.replace(new RegExp(i+t[n]+o)," ").trim()},hasClass:function(e,t){return t&&new RegExp(i+t+o).test(e.className)}},l.Util={isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)}},t.EventSystem={eventCollection:{},eventIdCounter:0,isEventTarget:function(e){return e.addEventListener?1:0},createEventTarget:function(){return new t.EventTarget},addEventListenerHelper:function(e,t,n){e.addEventListener(t,n,!1)},removeEventListenerHelper:function(e,t,n){e.removeEventListener(t,n)},purgeAll:function(){for(var e,t,n=this.eventCollection,r=Object.keys(n),i=r.length,o=0;i>o;o++)(t=n[e=r[o]])&&t.handleCollection&&t.handleCollection.length>0&&this.purgeEventTarget(t.handleCollection[0].element),delete n[e]},purgeEventTarget:function(e){var t,n=this,r=e._aniJSEventID;if(r){for(var i,o=(t=n.eventCollection[r].handleCollection).length,a=0;o>a;a++)i=t[a],n.removeEventListenerHelper(e,i.eventType,i.listener);n.eventCollection[r]=e._aniJSEventID=null,delete n.eventCollection[r],delete e._aniJSEventID}},registerEventHandle:function(e,t,n){var r=this,i=e._aniJSEventID,o=r.eventCollection,a={eventType:t,listener:n,element:e};if(i)o[i].handleCollection.push(a);else{var v={handleCollection:[a]};o[++r.eventIdCounter]=v,e._aniJSEventID=r.eventIdCounter}}},t.EventTarget=function(){this._listeners={}},t.EventTarget.prototype={constructor:t.EventTarget,addEventListener:function(e,t){var n=this;void 0===n._listeners[e]&&(n._listeners[e]=[]),n._listeners[e].push(t)},dispatchEvent:function(e){var t=this;if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(this._listeners[e.type]instanceof Array)for(var n=t._listeners[e.type],r=0,i=n.length;i>r;r++)n[r].call(t,e)},removeEventListener:function(e,t){if(this._listeners[e]instanceof Array)for(var n=this._listeners[e],r=0,i=n.length;i>r;r++)if(n[r]===t){n.splice(r,1);break}}},t}(n||{});return n.init(),n.run(),"function"==typeof define&&define.amd&&define("anijs",[],function(){return n}),void 0===t&&(e.AniJS=n),n});